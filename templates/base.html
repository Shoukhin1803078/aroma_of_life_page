<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aroma of Life</title>
    <link rel="stylesheet" href="/static/css/style.css?v=4">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo" style="text-decoration: none; color: inherit;">Aroma of Life</a>
                <button id="collapse-btn" class="collapse-btn">></button>
            </div>
            <ul class="nav-links">
                <li>
                    <a href="/" data-key="settings.nav.home">Home</a>
                </li>
                {% for category in data.categories %}
                <li class="dropdown-container">
                    <div class="dropdown-header">
                        <a href="/category/{{ category.id }}" data-key="categories.{{ loop.index0 }}.name">{{
                            category.name.en }}</a>
                        {% if category.subcategories %}
                        <span class="arrow">▼</span>
                        {% endif %}
                    </div>
                    {% if category.subcategories %}
                    <div class="dropdown-content" id="{{ category.id }}-dropdown">
                        <!-- Populated by JS -->
                    </div>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>

            <div class="sidebar-footer">
                <select id="lang-switch">
                    <option value="en">English</option>
                    <option value="bn">বাংলা</option>
                </select>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="sticky-header">
                <!-- Top Bar for Cart and Mobile Toggle -->
                <header class="top-bar">
                    <div class="mobile-toggle">☰</div>
                    <div class="ad-section">
                        <marquee behavior="scroll" direction="left" scrollamount="5">আমাদের যে কোন পণ্য অর্ডার করতে কল
                            বা
                            WhatsApp করুন: +8801321208940 | হট লাইন: 09642-922922</marquee>
                    </div>
                    <div class="cart-icon" onclick="toggleCart()">
                        <span data-key="settings.nav.cart">Cart</span> (<span id="cart-count">0</span>)
                    </div>
                </header>

                <!-- Breadcrumbs -->
                <div id="breadcrumbs" class="breadcrumbs-container"></div>

                <!-- Search Section -->
                <div class="search-container">
                    <input type="text" id="product-search" placeholder="Search products..." autocomplete="off">
                    <div id="live-search-results" class="live-search-results">
                        <div id="search-categories" class="search-categories"></div>
                        <div id="search-products" class="search-products-grid"></div>
                    </div>
                </div>
            </div>

            <main>
                {% block content %}{% endblock %}
            </main>

            <!-- Floating Back Button -->
            <button onclick="window.history.back()" class="back-btn floating-back" title="Go Back">
                <span>⬅</span> <span data-key="settings.nav.back">Back</span>
            </button>
        </div>
    </div>

    <div id="cart-sidebar" class="cart-sidebar">
        <div class="cart-header">
            <h2 data-key="settings.nav.cart">Your Cart</h2>
            <button onclick="toggleCart()" class="close-cart">&times;</button>
        </div>
        <div id="cart-items">
            <!-- Cart items here -->
        </div>
        <div class="cart-footer">
            <div class="total">
                <span data-key="settings.cart_labels.total">Total</span>: ৳<span id="cart-total">0</span>
            </div>
            <button class="checkout-btn" data-key="settings.cart_labels.checkout">Checkout</button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Checkout</h2>
            <form id="checkout-form" onsubmit="submitOrder(event)">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="email">Email (Optional)</label>
                    <input type="email" id="email">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea id="address" required></textarea>
                </div>
                <div class="form-group">
                    <label for="message">Message (Optional)</label>
                    <textarea id="message"></textarea>
                </div>
                <button type="submit" class="submit-btn">Place Order</button>
            </form>
        </div>
    </div>

    <script src="/static/js/script.js?v=3"></script>
</body>

</html>